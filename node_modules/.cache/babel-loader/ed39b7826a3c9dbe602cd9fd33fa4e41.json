{"ast":null,"code":"import _classCallCheck from \"/Users/cse498/ReactApps/product-rec-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cse498/ReactApps/product-rec-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport React, { Component } from 'react';\n\nvar data = require('./data.json');\n\nvar productRecommendation =\n/*#__PURE__*/\nfunction () {\n  function productRecommendation() {\n    _classCallCheck(this, productRecommendation);\n  }\n\n  _createClass(productRecommendation, [{\n    key: \"getProducts\",\n    value: function getProducts(userintput) {\n      //alert(\"here\");\n      var arrayValidProducts = [];\n\n      for (var i in data) {\n        //alert(i);\n        var validProduct = true;\n        var rate = 100;\n        var term = 0;\n        var downPayment = 0;\n        var amount = 0;\n\n        for (var j in data[i]) {\n          //alert(j);\n          if (!validProduct) {\n            //alert(\"ENDING\")\n            break;\n          } else {\n            if (typeof data[i][j] == \"object\") {\n              var temp = data[i][j];\n\n              if (j == \"loan_type\") {\n                var validLoanType = false;\n                var userSelected = userintput[j].toLowerCase();\n\n                if (userSelected === \"refinance\") {\n                  //alert(\"refri\");\n                  userSelected = userintput['purpose'];\n\n                  if (userSelected === \"Cash Out\") {\n                    //alert(\"cashout\");\n                    userSelected = \"cash-out\";\n                  } else {\n                    userSelected = userintput[j].toLowerCase();\n                  }\n                }\n\n                for (var k in temp) {\n                  //k is the subcategories types of loans\n                  //alert(k+\"-k\");\n                  if (k === userSelected) {\n                    //currently we are only looking for purchase\n                    if (data[i][j][k]) {\n                      //alert(\"FOUND\")\n                      validLoanType = true;\n                    }\n                  }\n                }\n\n                if (validLoanType) {\n                  validProduct = true; //alert('valid');\n                } else {\n                  validProduct = false;\n                }\n              } else if (j == \"building_type\") {\n                var validBuildingType = false; //alert(j);\n\n                for (var k in temp) {\n                  //alert(k+\"--\");\n                  if (k === \"single_family\") {\n                    //currently we are only looking for purchase\n                    // alert(k+\"--\"+userintput[j].toLowerCase());\n                    if (userintput[j].toLowerCase() === \"house\") {\n                      if (data[i][j][k]) {\n                        //alert(\"FOUND in house\")\n                        validBuildingType = true;\n                      }\n                    }\n                  } else if (k === \"townhome\") {\n                    if (userintput[j] === \"Townhome/Duplex\") {\n                      if (data[i][j][k]) {\n                        //alert(\"FOUND\")\n                        validBuildingType = true;\n                      }\n                    }\n                  } else if (k === \"condominium\") {\n                    if (userintput[j].toLowerCase() === \"condominium\") {\n                      if (data[i][j][k]) {\n                        //alert(\"FOUND\")\n                        validBuildingType = true;\n                      }\n                    }\n                  } else if (k === \"mutli_family\") {\n                    if (userintput[j].toLowerCase() === \"mutli-family\") {\n                      if (data[i][j][k]) {\n                        //alert(\"FOUND\")\n                        validBuildingType = true;\n                      }\n                    }\n                  } //need to add others but check with data first\n\n                }\n\n                if (validBuildingType) {\n                  validProduct = true;\n                } else {\n                  validProduct = false;\n                }\n              } else if (j === \"states\") {\n                var validState = false;\n\n                for (var k in temp) {\n                  //k is individual state\n                  if (k.toLowerCase() === userintput[j].toLowerCase()) {\n                    //currently only doing abbreviations need to account for full name\n                    if (data[i][j][k]) {\n                      validState = true;\n                    }\n                  }\n                }\n\n                if (validState) {\n                  validProduct = true;\n                } else {\n                  validProduct = false;\n                }\n              } else if (j === \"credit\") {\n                // need to fix this, This isnt 100 correct\n                //alert(\"HERE\");\n                var validCredit = false;\n\n                for (var k in temp) {\n                  //k are the minimum credit scores\n                  if (+k < +userintput[j]) {\n                    // alert(JSON.stringify(k));\n                    var annualIncome = userintput['income'];\n                    var monthlyDebt = userintput['debt'];\n                    downPayment = userintput['downPayment'];\n                    amount = userintput['amount'];\n                    var downPaymentPercentage = data[i][j][k]['down_payment']; //we do not have the information to calculate ltv\n\n                    var dti = monthlyDebt / (annualIncome / 12) * 100; //double check with erika about dti\n                    // alert(dti+\"-dti-\"+ data[i][j][k]['dti']);\n\n                    if (amount * +downPaymentPercentage < +downPayment) {\n                      if (dti <= +data[i][j][k]['dti']) {\n                        validCredit = true;\n                        rate = +data[i][j][k]['rate'];\n                        term = +data[i]['term'];\n                      }\n                    } //alert(\"HERE\");\n\n\n                    if (userintput['loan_type'] != \"purchase\") {\n                      //for refinance and other such\n                      //alert(\"here\")\n                      //alert((data[i][j]['term'])+\" \"+ +userintput['term'] );\n                      if (data[i][j]['term'] == null) {\n                        validCredit = true;\n                      } else {\n                        if (+userintput['term'] >= +data[i][j]['term']) {\n                          validCredit = true;\n                        } else {\n                          validCredit = false;\n                        }\n                      }\n                    }\n                  }\n                }\n\n                if (validCredit) {\n                  validProduct = true;\n                } else {\n                  validProduct = false;\n                }\n              }\n            } else {\n              if (j == \"minimum_amount\" || j == \"maximum_amount\") {\n                var validAmount = false; //alert(\"HERE\")\n\n                if (j == \"minimum_amount\") {\n                  //alert(\"IN MIN\");\n                  if (+data[i][j] < +userintput['amount']) {\n                    validAmount = true;\n                  }\n                }\n\n                if (j == \"maximum_amount\") {\n                  //alert(\"IN MAX\");\n                  //alert(\"HERE___\"+data[i][j]);\n                  if (data[i][j] == null) {\n                    //alert(\"NULL\");\n                    validAmount = true;\n                  }\n\n                  if (+data[i][j] > +userintput['amount']) {\n                    validAmount = true;\n                  }\n                }\n\n                if (validAmount) {\n                  validProduct = true;\n                } else {\n                  validProduct = false;\n                } //alert(validAmount +\"-\"+validProduct);\n\n              } else if (j == \"military\") {\n                var validMilitary = false;\n\n                if (data[i][j] && userintput[j] == \"Yes\") {\n                  validMilitary = true;\n                } else if (!data[i][j]) {\n                  validMilitary = true;\n                }\n\n                if (validMilitary) {\n                  validProduct = true;\n                } else {\n                  validProduct = false;\n                }\n              }\n            }\n          }\n        }\n\n        if (validProduct) {\n          var tempObj = {};\n          tempObj[i] = {\n            \"rate\": rate,\n            \"term\": term,\n            \"downPayment\": downPayment,\n            \"amount\": amount\n          };\n          arrayValidProducts.push(tempObj);\n        }\n      }\n\n      var isNotSorted = true;\n\n      if (arrayValidProducts.length > 1) {\n        for (var i = 1; i < arrayValidProducts.length; i++) {\n          var tempObject = arrayValidProducts[i];\n          var tempObjectKey = Object.keys(tempObject);\n          var key = tempObject[tempObjectKey];\n          j = i - 1;\n          var nextObject = arrayValidProducts[j];\n          var nextObjectKey = Object.keys(nextObject);\n          var nextKey = nextObject[nextObjectKey];\n\n          while (j >= 0 && +key < +nextKey) {\n            arrayValidProducts[j + 1] = arrayValidProducts[j];\n            j -= 1;\n            nextObject = arrayValidProducts[j];\n            nextObjectKey = Object.keys(nextObject);\n            nextKey = nextObject[nextObjectKey];\n          }\n\n          arrayValidProducts[j + 1] = tempObject;\n        }\n      }\n\n      console.log(arrayValidProducts);\n\n      if (arrayValidProducts.length > 3) {\n        return [arrayValidProducts[0], arrayValidProducts[1], arrayValidProducts[2]];\n      } else {\n        return arrayValidProducts;\n      }\n    }\n  }]);\n\n  return productRecommendation;\n}();\n\nexport { productRecommendation as default };","map":{"version":3,"sources":["/Users/cse498/ReactApps/product-rec-app/src/productRecommendation.js"],"names":["React","Component","data","require","productRecommendation","userintput","arrayValidProducts","i","validProduct","rate","term","downPayment","amount","j","temp","validLoanType","userSelected","toLowerCase","k","validBuildingType","validState","validCredit","annualIncome","monthlyDebt","downPaymentPercentage","dti","validAmount","validMilitary","tempObj","push","isNotSorted","length","tempObject","tempObjectKey","Object","keys","key","nextObject","nextObjectKey","nextKey","console","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,IAAIC,IAAI,GAAGC,OAAO,CAAC,aAAD,CAAlB;;IAEqBC,qB;;;;;;;;;gCAELC,U,EAAW;AACnB;AAEA,UAAIC,kBAAkB,GAAG,EAAzB;;AAEA,WAAI,IAAIC,CAAR,IAAaL,IAAb,EAAkB;AACd;AACA,YAAIM,YAAY,GAAG,IAAnB;AACA,YAAIC,IAAI,GAAG,GAAX;AACA,YAAIC,IAAI,GAAG,CAAX;AACA,YAAIC,WAAW,GAAC,CAAhB;AACA,YAAIC,MAAM,GAAG,CAAb;;AACA,aAAI,IAAIC,CAAR,IAAaX,IAAI,CAACK,CAAD,CAAjB,EAAqB;AACjB;AACA,cAAG,CAACC,YAAJ,EAAiB;AACb;AACA;AACH,WAHD,MAKI;AACA,gBAAI,OAAON,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,CAAP,IAAsB,QAA1B,EAAmC;AAC/B,kBAAIC,IAAI,GAAGZ,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,CAAX;;AAEA,kBAAGA,CAAC,IAAE,WAAN,EAAkB;AACd,oBAAIE,aAAa,GAAG,KAApB;AACA,oBAAIC,YAAY,GAAGX,UAAU,CAACQ,CAAD,CAAV,CAAcI,WAAd,EAAnB;;AAEA,oBAAGD,YAAY,KAAK,WAApB,EAAgC;AAC5B;AACAA,kBAAAA,YAAY,GAAGX,UAAU,CAAC,SAAD,CAAzB;;AACA,sBAAGW,YAAY,KAAK,UAApB,EAA+B;AAC3B;AACAA,oBAAAA,YAAY,GAAG,UAAf;AACH,mBAHD,MAIK;AACDA,oBAAAA,YAAY,GAAGX,UAAU,CAACQ,CAAD,CAAV,CAAcI,WAAd,EAAf;AACH;AACJ;;AAED,qBAAI,IAAIC,CAAR,IAAaJ,IAAb,EAAkB;AAAE;AAChB;AAGA,sBAAGI,CAAC,KAAKF,YAAT,EAAuB;AAAC;AAEpB,wBAAGd,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,CAAH,EAAiB;AACb;AACAH,sBAAAA,aAAa,GAAG,IAAhB;AACH;AACJ;AACJ;;AACD,oBAAGA,aAAH,EAAiB;AACbP,kBAAAA,YAAY,GAAG,IAAf,CADa,CAEb;AACH,iBAHD,MAII;AACAA,kBAAAA,YAAY,GAAC,KAAb;AACH;AACJ,eAnCD,MAoCK,IAAGK,CAAC,IAAI,eAAR,EAAwB;AACzB,oBAAIM,iBAAiB,GAAG,KAAxB,CADyB,CAEzB;;AACA,qBAAI,IAAID,CAAR,IAAaJ,IAAb,EAAkB;AAEd;AACA,sBAAGI,CAAC,KAAK,eAAT,EAAyB;AAAC;AACvB;AACC,wBAAIb,UAAU,CAACQ,CAAD,CAAV,CAAcI,WAAd,OAAgC,OAApC,EAA4C;AACxC,0BAAGf,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,CAAH,EAAiB;AACb;AACAC,wBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,mBARD,MASK,IAAID,CAAC,KAAI,UAAT,EAAoB;AAErB,wBAAIb,UAAU,CAACQ,CAAD,CAAV,KAAkB,iBAAtB,EAAwC;AACpC,0BAAGX,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,CAAH,EAAiB;AACb;AACAC,wBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,mBARI,MASA,IAAID,CAAC,KAAI,aAAT,EAAuB;AAExB,wBAAIb,UAAU,CAACQ,CAAD,CAAV,CAAcI,WAAd,OAAgC,aAApC,EAAkD;AAC9C,0BAAGf,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,CAAH,EAAiB;AACb;AACAC,wBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,mBARI,MASA,IAAID,CAAC,KAAI,cAAT,EAAwB;AAEzB,wBAAIb,UAAU,CAACQ,CAAD,CAAV,CAAcI,WAAd,OAAgC,cAApC,EAAmD;AAC/C,0BAAGf,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,CAAH,EAAiB;AACb;AACAC,wBAAAA,iBAAiB,GAAG,IAApB;AACH;AACJ;AACJ,mBAtCa,CAsCZ;;AACL;;AACD,oBAAGA,iBAAH,EAAqB;AACjBX,kBAAAA,YAAY,GAAG,IAAf;AACH,iBAFD,MAGI;AACAA,kBAAAA,YAAY,GAAC,KAAb;AACH;AAEJ,eAlDI,MAmDA,IAAGK,CAAC,KAAK,QAAT,EAAkB;AACnB,oBAAIO,UAAU,GAAG,KAAjB;;AAEA,qBAAI,IAAIF,CAAR,IAAaJ,IAAb,EAAkB;AAAE;AAEhB,sBAAGI,CAAC,CAACD,WAAF,OAAoBZ,UAAU,CAACQ,CAAD,CAAV,CAAcI,WAAd,EAAvB,EAAmD;AAAC;AAEhD,wBAAGf,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,CAAH,EAAiB;AACbE,sBAAAA,UAAU,GAAG,IAAb;AACH;AACJ;AACJ;;AACD,oBAAGA,UAAH,EAAc;AACVZ,kBAAAA,YAAY,GAAG,IAAf;AACH,iBAFD,MAGI;AACAA,kBAAAA,YAAY,GAAC,KAAb;AACH;AACJ,eAlBI,MAmBA,IAAGK,CAAC,KAAK,QAAT,EAAkB;AAAE;AACpB;AACA,oBAAIQ,WAAW,GAAG,KAAlB;;AACA,qBAAI,IAAIH,CAAR,IAAaJ,IAAb,EAAkB;AAAE;AAEhB,sBAAG,CAACI,CAAD,GAAK,CAACb,UAAU,CAACQ,CAAD,CAAnB,EAAuB;AACrB;AACC,wBAAIS,YAAY,GAAGjB,UAAU,CAAC,QAAD,CAA7B;AACA,wBAAIkB,WAAW,GAAGlB,UAAU,CAAC,MAAD,CAA5B;AACAM,oBAAAA,WAAW,GAAGN,UAAU,CAAC,aAAD,CAAxB;AACAO,oBAAAA,MAAM,GAAGP,UAAU,CAAC,QAAD,CAAnB;AAEA,wBAAImB,qBAAqB,GAAGtB,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,EAAc,cAAd,CAA5B,CAPoB,CAQpB;;AACA,wBAAIO,GAAG,GAAIF,WAAW,IAAED,YAAY,GAAC,EAAf,CAAZ,GAAgC,GAA1C,CAToB,CAS2B;AAChD;;AACC,wBAAIV,MAAM,GAAI,CAACY,qBAAX,GAAqC,CAACb,WAA1C,EAAyD;AACrD,0BAAGc,GAAG,IAAI,CAACvB,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,EAAc,KAAd,CAAX,EAAgC;AAC5BG,wBAAAA,WAAW,GAAG,IAAd;AACAZ,wBAAAA,IAAI,GAAI,CAACP,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAWK,CAAX,EAAc,MAAd,CAAT;AACAR,wBAAAA,IAAI,GAAI,CAACR,IAAI,CAACK,CAAD,CAAJ,CAAQ,MAAR,CAAT;AACH;AACJ,qBAjBmB,CAkBpB;;;AACA,wBAAGF,UAAU,CAAC,WAAD,CAAV,IAA2B,UAA9B,EAAyC;AAAC;AACtC;AACA;AACA,0BAAIH,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAW,MAAX,CAAD,IAAsB,IAAzB,EAA8B;AAC1BQ,wBAAAA,WAAW,GAAG,IAAd;AACH,uBAFD,MAGI;AACA,4BAAG,CAAChB,UAAU,CAAC,MAAD,CAAX,IAAwB,CAACH,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,EAAW,MAAX,CAA5B,EAAgD;AAC5CQ,0BAAAA,WAAW,GAAG,IAAd;AACH,yBAFD,MAGI;AACAA,0BAAAA,WAAW,GAAG,KAAd;AACH;AACJ;AACJ;AAEH;AACJ;;AACD,oBAAGA,WAAH,EAAe;AACXb,kBAAAA,YAAY,GAAG,IAAf;AACH,iBAFD,MAGI;AACAA,kBAAAA,YAAY,GAAC,KAAb;AACH;AACL;AAEJ,aA/JD,MAgKI;AACA,kBAAGK,CAAC,IAAI,gBAAL,IAAyBA,CAAC,IAAI,gBAAjC,EAAmD;AAC/C,oBAAIa,WAAW,GAAG,KAAlB,CAD+C,CAE/C;;AAEA,oBAAGb,CAAC,IAAI,gBAAR,EAAyB;AACrB;AACA,sBAAG,CAACX,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,CAAD,GAAa,CAACR,UAAU,CAAC,QAAD,CAA3B,EAAsC;AAClCqB,oBAAAA,WAAW,GAAG,IAAd;AACH;AAEJ;;AACD,oBAAGb,CAAC,IAAI,gBAAR,EAAyB;AACrB;AACA;AACA,sBAAGX,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,KAAc,IAAjB,EAAsB;AAClB;AACAa,oBAAAA,WAAW,GAAG,IAAd;AACH;;AACD,sBAAG,CAACxB,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,CAAD,GAAa,CAACR,UAAU,CAAC,QAAD,CAA3B,EAAsC;AAClCqB,oBAAAA,WAAW,GAAG,IAAd;AACH;AACJ;;AAED,oBAAGA,WAAH,EAAe;AACXlB,kBAAAA,YAAY,GAAG,IAAf;AACH,iBAFD,MAGI;AACAA,kBAAAA,YAAY,GAAC,KAAb;AACH,iBA5B8C,CA6B/C;;AACJ,eA9BA,MA+BI,IAAGK,CAAC,IAAI,UAAR,EAAmB;AACvB,oBAAIc,aAAa,GAAG,KAApB;;AAEA,oBAAGzB,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,KAAeR,UAAU,CAACQ,CAAD,CAAV,IAAiB,KAAnC,EAA0C;AACtCc,kBAAAA,aAAa,GAAG,IAAhB;AACH,iBAFD,MAGK,IAAG,CAACzB,IAAI,CAACK,CAAD,CAAJ,CAAQM,CAAR,CAAJ,EAAe;AAChBc,kBAAAA,aAAa,GAAG,IAAhB;AACH;;AAED,oBAAGA,aAAH,EAAiB;AACbnB,kBAAAA,YAAY,GAAG,IAAf;AACH,iBAFD,MAGI;AACAA,kBAAAA,YAAY,GAAC,KAAb;AACH;AACD;AACH;AACJ;AACJ;;AACD,YAAGA,YAAH,EAAgB;AACZ,cAAIoB,OAAO,GAAG,EAAd;AACAA,UAAAA,OAAO,CAACrB,CAAD,CAAP,GAAa;AAAC,oBAAOE,IAAR;AAAa,oBAAOC,IAApB;AAAyB,2BAAcC,WAAvC;AAAmD,sBAASC;AAA5D,WAAb;AACAN,UAAAA,kBAAkB,CAACuB,IAAnB,CAAwBD,OAAxB;AACH;AACJ;;AAED,UAAIE,WAAW,GAAG,IAAlB;;AACA,UAAGxB,kBAAkB,CAACyB,MAAnB,GAA4B,CAA/B,EAAiC;AAC7B,aAAI,IAAIxB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGD,kBAAkB,CAACyB,MAAtC,EAA8CxB,CAAC,EAA/C,EAAmD;AAC/C,cAAIyB,UAAU,GAAG1B,kBAAkB,CAACC,CAAD,CAAnC;AACA,cAAI0B,aAAa,GAAGC,MAAM,CAACC,IAAP,CAAYH,UAAZ,CAApB;AACA,cAAII,GAAG,GAAGJ,UAAU,CAACC,aAAD,CAApB;AACApB,UAAAA,CAAC,GAAGN,CAAC,GAAC,CAAN;AAEA,cAAI8B,UAAU,GAAG/B,kBAAkB,CAACO,CAAD,CAAnC;AACA,cAAIyB,aAAa,GAAGJ,MAAM,CAACC,IAAP,CAAYE,UAAZ,CAApB;AACA,cAAIE,OAAO,GAAGF,UAAU,CAACC,aAAD,CAAxB;;AAEA,iBAAOzB,CAAC,IAAI,CAAL,IAAW,CAACuB,GAAF,GAAQ,CAACG,OAA1B,EAAmC;AAC/BjC,YAAAA,kBAAkB,CAACO,CAAC,GAAC,CAAH,CAAlB,GAA0BP,kBAAkB,CAACO,CAAD,CAA5C;AACAA,YAAAA,CAAC,IAAE,CAAH;AACAwB,YAAAA,UAAU,GAAG/B,kBAAkB,CAACO,CAAD,CAA/B;AACAyB,YAAAA,aAAa,GAAGJ,MAAM,CAACC,IAAP,CAAYE,UAAZ,CAAhB;AACAE,YAAAA,OAAO,GAAGF,UAAU,CAACC,aAAD,CAApB;AACH;;AAEDhC,UAAAA,kBAAkB,CAACO,CAAC,GAAC,CAAH,CAAlB,GAA0BmB,UAA1B;AAEH;AACJ;;AACDQ,MAAAA,OAAO,CAACC,GAAR,CAAYnC,kBAAZ;;AACA,UAAGA,kBAAkB,CAACyB,MAAnB,GAA4B,CAA/B,EAAkC;AAC9B,eAAO,CAACzB,kBAAkB,CAAC,CAAD,CAAnB,EAAuBA,kBAAkB,CAAC,CAAD,CAAzC,EAA6CA,kBAAkB,CAAC,CAAD,CAA/D,CAAP;AACH,OAFD,MAGI;AACA,eAAOA,kBAAP;AACH;AAEJ;;;;;;SAjRgBF,qB","sourcesContent":["import React, { Component } from 'react';\n\nvar data = require('./data.json');\n\nexport default class productRecommendation {\n\n    getProducts(userintput){\n        //alert(\"here\");\n\n        var arrayValidProducts = [];\n\n        for(var i in data){\n            //alert(i);\n            var validProduct = true;\n            var rate = 100;\n            var term = 0;\n            var downPayment=0;\n            var amount = 0;\n            for(var j in data[i]){\n                //alert(j);\n                if(!validProduct){\n                    //alert(\"ENDING\")\n                    break;\n                }\n\n                else{\n                    if (typeof(data[i][j]) == \"object\"){\n                        var temp = data[i][j];\n\n                        if(j==\"loan_type\"){\n                            var validLoanType = false;\n                            var userSelected = userintput[j].toLowerCase();\n\n                            if(userSelected === \"refinance\"){\n                                //alert(\"refri\");\n                                userSelected = userintput['purpose'];\n                                if(userSelected === \"Cash Out\"){\n                                    //alert(\"cashout\");\n                                    userSelected = \"cash-out\";\n                                }\n                                else {\n                                    userSelected = userintput[j].toLowerCase();\n                                }\n                            }\n\n                            for(var k in temp){ //k is the subcategories types of loans\n                                //alert(k+\"-k\");\n\n\n                                if(k === userSelected ){//currently we are only looking for purchase\n\n                                    if(data[i][j][k]){\n                                        //alert(\"FOUND\")\n                                        validLoanType = true;\n                                    }\n                                }\n                            }\n                            if(validLoanType){\n                                validProduct = true;\n                                //alert('valid');\n                            }\n                            else{\n                                validProduct=false;\n                            }\n                        }\n                        else if(j == \"building_type\"){\n                            var validBuildingType = false;\n                            //alert(j);\n                            for(var k in temp){\n\n                                //alert(k+\"--\");\n                                if(k === \"single_family\"){//currently we are only looking for purchase\n                                   // alert(k+\"--\"+userintput[j].toLowerCase());\n                                    if( userintput[j].toLowerCase() === \"house\"){\n                                        if(data[i][j][k]){\n                                            //alert(\"FOUND in house\")\n                                            validBuildingType = true;\n                                        }\n                                    }\n                                }\n                                else if (k=== \"townhome\"){\n\n                                    if( userintput[j] === \"Townhome/Duplex\"){\n                                        if(data[i][j][k]){\n                                            //alert(\"FOUND\")\n                                            validBuildingType = true;\n                                        }\n                                    }\n                                }\n                                else if (k=== \"condominium\"){\n\n                                    if( userintput[j].toLowerCase() === \"condominium\"){\n                                        if(data[i][j][k]){\n                                            //alert(\"FOUND\")\n                                            validBuildingType = true;\n                                        }\n                                    }\n                                }\n                                else if (k=== \"mutli_family\"){\n\n                                    if( userintput[j].toLowerCase() === \"mutli-family\"){\n                                        if(data[i][j][k]){\n                                            //alert(\"FOUND\")\n                                            validBuildingType = true;\n                                        }\n                                    }\n                                } //need to add others but check with data first\n                            }\n                            if(validBuildingType){\n                                validProduct = true;\n                            }\n                            else{\n                                validProduct=false;\n                            }\n\n                        }\n                        else if(j === \"states\"){\n                            var validState = false;\n\n                            for(var k in temp){ //k is individual state\n\n                                if(k.toLowerCase() === userintput[j].toLowerCase()){//currently only doing abbreviations need to account for full name\n\n                                    if(data[i][j][k]){\n                                        validState = true;\n                                    }\n                                }\n                            }\n                            if(validState){\n                                validProduct = true;\n                            }\n                            else{\n                                validProduct=false;\n                            }\n                        }\n                        else if(j === \"credit\"){ // need to fix this, This isnt 100 correct\n                             //alert(\"HERE\");\n                             var validCredit = false;\n                             for(var k in temp){ //k are the minimum credit scores\n\n                                 if(+k < +userintput[j]){\n                                   // alert(JSON.stringify(k));\n                                    var annualIncome = userintput['income'];\n                                    var monthlyDebt = userintput['debt'];\n                                    downPayment = userintput['downPayment'];\n                                    amount = userintput['amount'];\n\n                                    var downPaymentPercentage = data[i][j][k]['down_payment'];\n                                    //we do not have the information to calculate ltv\n                                    var dti = (monthlyDebt/(annualIncome/12))*100; //double check with erika about dti\n                                   // alert(dti+\"-dti-\"+ data[i][j][k]['dti']);\n                                    if((amount * (+downPaymentPercentage) < (+downPayment) )){\n                                        if(dti <= +data[i][j][k]['dti']){\n                                            validCredit = true;\n                                            rate = (+data[i][j][k]['rate']);\n                                            term = (+data[i]['term']);\n                                        }\n                                    }\n                                    //alert(\"HERE\");\n                                    if(userintput['loan_type'] != \"purchase\"){//for refinance and other such\n                                        //alert(\"here\")\n                                        //alert((data[i][j]['term'])+\" \"+ +userintput['term'] );\n                                        if((data[i][j]['term'])==null){\n                                            validCredit = true;\n                                        }\n                                        else{\n                                            if(+userintput['term'] >= (+data[i][j]['term'])){\n                                                validCredit = true;\n                                            }\n                                            else{\n                                                validCredit = false;\n                                            }\n                                        }\n                                    }\n\n                                 }\n                             }\n                             if(validCredit){\n                                 validProduct = true;\n                             }\n                             else{\n                                 validProduct=false;\n                             }\n                        }\n\n                    }\n                    else{\n                        if(j == \"minimum_amount\" || j == \"maximum_amount\" ){\n                            var validAmount = false;\n                            //alert(\"HERE\")\n\n                            if(j == \"minimum_amount\"){\n                                //alert(\"IN MIN\");\n                                if(+data[i][j]< +userintput['amount']){\n                                    validAmount = true;\n                                }\n\n                            }\n                            if(j == \"maximum_amount\"){\n                                //alert(\"IN MAX\");\n                                //alert(\"HERE___\"+data[i][j]);\n                                if(data[i][j] == null){\n                                    //alert(\"NULL\");\n                                    validAmount = true;\n                                }\n                                if(+data[i][j]> +userintput['amount']){\n                                    validAmount = true;\n                                }\n                            }\n\n                            if(validAmount){\n                                validProduct = true;\n                            }\n                            else{\n                                validProduct=false;\n                            }\n                            //alert(validAmount +\"-\"+validProduct);\n                       }\n                       else if(j == \"military\"){\n                        var validMilitary = false;\n\n                        if(data[i][j] && (userintput[j] == \"Yes\")){\n                            validMilitary = true;\n                        }\n                        else if(!data[i][j]){\n                            validMilitary = true;\n                        }\n\n                        if(validMilitary){\n                            validProduct = true;\n                        }\n                        else{\n                            validProduct=false;\n                        }\n                       }\n                    }\n                }\n            }\n            if(validProduct){\n                var tempObj = {};\n                tempObj[i] = {\"rate\":rate,\"term\":term,\"downPayment\":downPayment,\"amount\":amount};\n                arrayValidProducts.push(tempObj);\n            }\n        }\n\n        var isNotSorted = true;\n        if(arrayValidProducts.length > 1){\n            for(var i = 1; i < arrayValidProducts.length; i ++){\n                var tempObject = arrayValidProducts[i];\n                var tempObjectKey = Object.keys(tempObject);\n                var key = tempObject[tempObjectKey];\n                j = i-1;\n\n                var nextObject = arrayValidProducts[j];\n                var nextObjectKey = Object.keys(nextObject);\n                var nextKey = nextObject[nextObjectKey];\n\n                while( j >= 0 && (+key)<(+nextKey)){\n                    arrayValidProducts[j+1] = arrayValidProducts[j];\n                    j-=1;\n                    nextObject = arrayValidProducts[j];\n                    nextObjectKey = Object.keys(nextObject);\n                    nextKey = nextObject[nextObjectKey];\n                }\n\n                arrayValidProducts[j+1] = tempObject;\n\n            }\n        }\n        console.log(arrayValidProducts);\n        if(arrayValidProducts.length > 3 ){\n            return [arrayValidProducts[0],arrayValidProducts[1],arrayValidProducts[2]];\n        }\n        else{\n            return arrayValidProducts;\n        }\n\n    }\n}\n"]},"metadata":{},"sourceType":"module"}